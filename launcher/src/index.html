<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Retreivr Launcher</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="shell">
      <header class="header">
        <h1>Retreivr Launcher</h1>
        <p class="subtitle">Guided setup and runtime control for local Retreivr on Docker.</p>
      </header>

      <section class="card">
        <h2>Step 1: System Check</h2>
        <div class="diag-grid">
          <p>Docker installed: <strong id="diagDockerInstalled">...</strong></p>
          <p>Docker running: <strong id="diagDockerRunning">...</strong></p>
          <p>Compose available: <strong id="diagComposeAvailable">...</strong></p>
          <p>Compose file: <strong id="diagComposeExists">...</strong></p>
          <p>Container: <strong id="diagContainerRunning">...</strong></p>
          <p>Web reachable: <strong id="diagWebReachable">...</strong></p>
        </div>
        <p id="diagError" class="diag-error"></p>
        <button id="refreshBtn" type="button">Refresh Status</button>
      </section>

      <section id="dockerGuideCard" class="card hidden">
        <h2 id="guideTitle">Docker Guidance</h2>
        <p id="guideSummary"></p>
        <ul id="guideSteps" class="guide-steps"></ul>
        <div class="actions-row">
          <button id="openDockerInstall" type="button">Open Docker Download</button>
          <button id="recheckDocker" type="button">Recheck Docker</button>
        </div>
      </section>

      <section class="card">
        <h2>Step 2: Configuration</h2>
        <form id="settingsForm" class="form-grid">
          <label for="hostPort">Host Port</label>
          <input id="hostPort" name="hostPort" type="number" min="1" max="65535" required />

          <label for="image">Image</label>
          <input id="image" name="image" type="text" required />

          <label for="containerName">Container Name</label>
          <input id="containerName" name="containerName" type="text" required />

          <div class="actions-row">
            <button id="saveBtn" type="submit">Save Configuration</button>
            <button id="resetBtn" type="button">Reset Defaults</button>
          </div>
        </form>
      </section>

      <section class="card controls">
        <h2>Step 3: Runtime</h2>
        <div class="actions-row">
          <button id="installBtn" type="button">Start Retreivr</button>
          <button id="stopBtn" type="button">Stop Retreivr</button>
          <button id="openUI" type="button">Open Web UI</button>
        </div>
      </section>

      <section class="card">
        <p id="summary">Loading launcher state...</p>
        <p id="composePath"></p>
        <p id="runtimeDir"></p>
        <p id="status" class="status">Initializing...</p>
      </section>
    </main>
    <script type="module" src="./main.js"></script>
  </body>
</html>
